version: '3.1'
forms:
  zipcode_form:
    required_slots:
    - legal_age
    - zipcode
  payment_method_form:
    required_slots:
    - payment_method
  confirmation_form:
    required_slots:
    - modify_details
entities:
- payment_method
- zipcode
- modify_details
- sunglasses_style
- face_shape
- activity_type
- brand_preference
- color_preference
- uv_protection
slots:
  zipcode:
    type: text
    mappings:
    - type: from_entity
      entity: zipcode
      conditions:
      - active_loop: zipcode_form
        requested_slot: zipcode
  legal_age:
    type: bool
    mappings:
    - type: from_intent
      intent: affirm
      value: true
      conditions:
      - active_loop: zipcode_form
        requested_slot: legal_age
    - type: from_intent
      intent: deny
      value: false
      conditions:
      - active_loop: zipcode_form
        requested_slot: legal_age
  payment_method:
    type: text
    mappings:
    - type: from_entity
      entity: payment_method
      conditions:
      - active_loop: payment_method_form
        requested_slot: payment_method
  modify_details:
    type: text
    mappings:
    - type: from_entity
      entity: modify_details
      conditions:
      - active_loop: confirmation_form
        requested_slot: modify_details
intents:
- affirm
- bot_challenge
- conversation
- deny
- finish_purchase
- goodbye
- greet
- inform
- inform_zipcode
- nlu_fallback
- cart_status
- ask_style_recommendation
- ask_face_shape_advice
- ask_uv_protection_info
- ask_brand_info
- ask_color_recommendation
- ask_activity_sunglasses
- ask_care_instructions
actions:
- utter_greet
- utter_goodbye
- correct_detail
- llm_processing
- process_cached_user_demands
- summarize_details
- validate_zipcode_form
- validate_payment_method_form
- validate_confirmation_form
- action_default_fallback
- return_cart_status
responses:
  utter_greet:
  - text: |
      Â¡Hola! ğŸ‘‹ Bienvenido a Ã“ptica Solar, tu tienda especializada en gafas de sol de alta calidad. Soy tu asistente virtual y estoy aquÃ­ para ayudarte a encontrar las gafas perfectas para ti. Puedo recomendarte modelos segÃºn tu estilo, forma de cara, actividades o preferencias. Â¿QuÃ© tipo de gafas de sol estÃ¡s buscando?
  utter_goodbye:
  - text: Â¡Hasta luego! ğŸ‘‹ Recuerda proteger tus ojos del sol. Â¡Nos vemos pronto!
  utter_iamabot:
  - text: SÃ­, soy un asistente virtual especializado en gafas de sol. Â¿En quÃ© puedo ayudarte hoy?
  utter_ask_legal_age:
  - text: |
      Antes de comenzar, necesito confirmar que eres mayor de edad para realizar compras. Â¿Eres mayor de 18 aÃ±os?
    buttons:
    - title: SÃ­, soy mayor de edad.
      payload: /affirm
    - title: Soy menor de edad.
      payload: /deny
  utter_ask_zipcode:
  - text: Perfecto! Ahora necesito tu cÃ³digo postal para calcular los costos de envÃ­o.
  - text: Por favor, proporciona tu cÃ³digo postal.
  - text: Necesito tu cÃ³digo postal para continuar. Â¿Puedes proporcionarlo?
  - text: Por favor, indica tu cÃ³digo postal.
  utter_submit_zipcode:
  - text: Â¡Excelente! ğŸ“ Ahora cuÃ©ntame quÃ© tipo de gafas de sol necesitas y te ayudarÃ© a encontrar las perfectas para ti.
  utter_submit_payment:
  - text: Â¡Perfecto! ğŸ“ Tu pedido estÃ¡ listo. Â¡RecibirÃ¡s tus gafas de sol en casa pronto!
  utter_slots_values:
  - text: |-
      InformaciÃ³n proporcionada:
       - CÃ³digo postal: {zipcode}
       - Mayor de edad: {legal_age}
  utter_please_rephrase:
  - text: Lo siento, no entendÃ­. Â¿Puedes reformular tu pregunta?
  - text: No entendÃ­. Â¿Puedes decirlo de otra manera?
  utter_zipcode_form_warning:
  - text: Antes de ayudarte, necesito que respondas las preguntas que te hice, por favor.
  - text: Antes de continuar, necesito que respondas las preguntas que te hice, por favor.
  utter_ask_payment_method:
  - text: 'Elige tu mÃ©todo de pago:'
    buttons:
    - title: Efectivo
      payload: /inform{{"payment_method":"Cash"}}
    - title: Tarjeta de CrÃ©dito
      payload: /inform{{"payment_method":"Credit"}}
    - title: Tarjeta de DÃ©bito
      payload: /inform{{"payment_method":"Debit"}}
    - title: MercadoPago
      payload: /inform{{"payment_method":"MercadoPago"}}
  utter_ask_modify_details:
  - text: ''
    buttons:
    - title: Cambiar cÃ³digo postal
      payload: /inform{{"modify_details":"zipcode"}}
    - title: Cambiar mÃ©todo de pago
      payload: /inform{{"modify_details":"payment_method"}}
    - title: Modificar el pedido
      payload: /inform{{"modify_details":"cart"}}
    - title: Â¡Todo estÃ¡ correcto!
      payload: /inform{{"modify_details":"ok"}}
  utter_default:
  - text: Lo siento, no entendÃ­. Por favor, reformula tu pregunta.
  - text: No entendÃ­. Por favor, explÃ­came de otra manera.
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
